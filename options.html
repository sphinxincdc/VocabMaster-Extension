<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>éœå¾·è‹±è¯­å­¦ä¹ ç®¡å®¶ - è®¾ç½®ï¼ˆBYOKï¼‰</title>
  <link rel="stylesheet" href="styles.css" />
  <link rel="stylesheet" href="theme.css" />
  <style>
    body{
      margin:0;
      background:radial-gradient(1200px 420px at 10% -10%, rgba(79,70,229,.22), transparent 60%),
                 radial-gradient(900px 380px at 110% 0%, rgba(124,58,237,.18), transparent 55%),
                 linear-gradient(180deg,var(--vb-bg),rgba(238,242,255,.85));
      color:var(--vb-text);
      font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial;
    }
    .wrap{max-width:1080px;margin:0 auto;padding:18px 14px 40px;}
    .wrap,.wrap *{box-sizing:border-box}
    .hd{
      background:var(--vb-surface);
      border:1px solid var(--vb-border);
      border-radius:var(--vb-r-card);
      padding:var(--vb-card-pad);
      box-shadow:var(--vb-shadow-md);
    }
    .hd h1{margin:0;font-size:var(--vb-fs-h1);font-weight:900}
    .hd p{margin:8px 0 0;color:var(--vb-muted);line-height:1.5}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:12px;min-width:0}
    .card{
      background:var(--vb-surface);
      border:1px solid var(--vb-border);
      border-radius:var(--vb-r-card);
      padding:var(--vb-card-pad);
      box-shadow:var(--vb-shadow-md);
      min-width:0;
      overflow:hidden;
    }
    .card h2{margin:0 0 5px;font-size:var(--vb-fs-h2);font-weight:900;display:flex;align-items:center;gap:8px;justify-content:space-between;flex-wrap:nowrap}
    .row{display:flex;flex-direction:column;gap:5px;margin:7px 0;min-width:0}
    label{font-size:var(--vb-fs-cap);color:var(--vb-muted)}
    input{
      border-radius:var(--vb-r-input);
      border:1px solid var(--vb-border);
      background:#fff;
      color:var(--vb-text);
      padding:10px 12px;
      font-size:var(--vb-fs-body);
      outline:none;
      box-sizing:border-box;
    }
    textarea{
      border-radius:var(--vb-r-input);
      border:1px solid var(--vb-border);
      background:#fff;
      color:var(--vb-text);
      padding:10px 12px;
      font-size:12px;
      outline:none;
      box-sizing:border-box;
      width:100%;
      min-height:84px;
      resize:vertical;
    }
    .actions{display:flex;gap:10px;margin-top:12px;align-items:center;flex-wrap:wrap;position:sticky;bottom:10px;z-index:20;background:var(--vb-surface);padding:8px;border:1px solid var(--vb-border);border-radius:var(--vb-r-card);box-shadow:var(--vb-shadow-md)}
    .btn{border:1px solid var(--vb-border);border-radius:var(--vb-r-btn);padding:10px 12px;font-weight:900;cursor:pointer;background:#fff;color:var(--vb-text)}
    .btn.secondary{background:rgba(15,23,42,.05);color:var(--vb-text);border:1px solid var(--vb-border)}
    .btn.mini,.testBtn{padding:6px 10px;font-size:12px;border-radius:999px;min-width:74px;justify-content:center}
    #save{border:0;background:var(--vb-brand-grad);color:#fff;box-shadow:var(--vb-shadow-md)}
    .status{font-size:var(--vb-fs-cap);color:var(--vb-muted)}
    .note{font-size:var(--vb-fs-cap);color:var(--vb-muted);line-height:1.4;opacity:.82}
    .status{opacity:.86}
    .testBtn[data-state="idle"]{color:var(--vb-text)}
    .testBtn[data-state="pending"]{color:#6b7280}
    .testBtn[data-state="success"]{color:#166534;border-color:#86efac;background:#ecfdf5}
    .testBtn[data-state="fail"]{color:#991b1b;border-color:#fca5a5;background:#fef2f2}
    .inputWrap{position:relative;width:100%;min-width:0}
    .inputWrap input{display:block;width:100%;max-width:100%;min-width:0;padding-right:44px;box-sizing:border-box}
    .eyeBtn{position:absolute;right:8px;top:50%;transform:translateY(-50%);border:1px solid var(--vb-border);background:rgba(15,23,42,.06);color:var(--vb-muted);width:28px;height:28px;border-radius:999px;cursor:pointer;font-size:13px;line-height:1;display:inline-flex;align-items:center;justify-content:center;padding:0;min-width:28px;flex:0 0 28px}
    .authActions{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .authState{margin-top:10px;padding:10px;border-radius:12px;border:1px solid var(--vb-border);background:rgba(15,23,42,.03);font-size:12px;line-height:1.5;white-space:pre-wrap}
    .authState.ok{border-color:#86efac;background:#ecfdf5;color:#166534}
    .authState.warn{border-color:#fcd34d;background:#fffbeb;color:#92400e}
    .authState.err{border-color:#fca5a5;background:#fef2f2;color:#991b1b}
    .checkInline{display:flex;align-items:center;gap:8px;font-size:12px;color:var(--vb-muted)}
    body.vb-force-dark .actions{background:var(--vb-surface);border-color:var(--vb-border)}
    body.vb-force-dark .testBtn[data-state="success"]{color:#86efac;background:rgba(22,101,52,.28);border-color:#166534}
    body.vb-force-dark .testBtn[data-state="fail"]{color:#fecaca;background:rgba(153,27,27,.30);border-color:#7f1d1d}
    @media(max-width:860px){.grid{grid-template-columns:1fr;}}
  
  @media (prefers-color-scheme: dark){
    body{
      background:radial-gradient(1200px 420px at 10% -10%, rgba(124,58,237,.34), transparent 60%),
                 radial-gradient(900px 380px at 110% 0%, rgba(91,33,182,.28), transparent 55%),
                 linear-gradient(180deg,var(--vb-bg),rgba(10,8,25,.96));
    }
    .hd,.card{background:var(--vb-surface);border-color:var(--vb-border)}
    .btn{background:rgba(15,23,42,.36);border-color:var(--vb-border);color:var(--vb-text)}
    #save{background:var(--vb-brand-grad);color:#fff;border:0}
    input{background:rgba(15,23,42,.36);border-color:var(--vb-border);color:var(--vb-text)}
    textarea{background:rgba(15,23,42,.36);border-color:var(--vb-border);color:var(--vb-text)}
    input::placeholder{color:rgba(237,233,254,.45)}
  }



  body.vb-force-dark{
    background:radial-gradient(1200px 420px at 10% -10%, rgba(124,58,237,.34), transparent 60%),
               radial-gradient(900px 380px at 110% 0%, rgba(91,33,182,.28), transparent 55%),
               linear-gradient(180deg,var(--vb-bg),rgba(10,8,25,.96));
  }
  body.vb-force-dark .hd,body.vb-force-dark .card{background:var(--vb-surface);border-color:var(--vb-border)}
  body.vb-force-dark .btn{background:rgba(15,23,42,.36);border-color:var(--vb-border);color:var(--vb-text)}
  body.vb-force-dark #save{background:var(--vb-brand-grad);color:#fff;border:0}
  body.vb-force-dark input{background:rgba(15,23,42,.36);border-color:var(--vb-border);color:var(--vb-text)}
  body.vb-force-dark textarea{background:rgba(15,23,42,.36);border-color:var(--vb-border);color:var(--vb-text)}
  body.vb-force-dark input::placeholder{color:rgba(237,233,254,.45)}

</style>
</head>
<body>
  <div class="wrap">
    <div class="hd">
      <h1>âš™ï¸ è®¾ç½®ï¼ˆBYOK - Bring Your Own Keyï¼‰</h1>
      <p>
        è¿™é‡Œæ”¾æ‰€æœ‰ API Keyã€‚<b>Key å¯ç•™ç©º</b>ï¼šä¼šèµ°å…è´¹/æ—  Key çš„ fallbackï¼ˆä¾‹å¦‚ï¼šGoogle ç¿»è¯‘/å…¬å¼€è¯å…¸å…¥å£ï¼‰ã€‚
        <br/>æ¥å£å¤±è´¥ä¼šâ€œé™é»˜é™çº§â€ï¼ˆä¸æ˜¾ç¤ºç»“æœå³å¯ï¼‰ï¼Œä¸ä¼šé˜»å¡åˆ’è¯å¼¹çª—ä¸å•è¯æœ¬åŠŸèƒ½ã€‚
      </p>
    </div>

    <div class="grid">
      <div class="card">
        <h2>æˆæƒï¼ˆå¯é€‰ï¼‰</h2>
        <div class="row">
          <label for="licenseCode">License Key</label>
          <div class="inputWrap"><input id="licenseCode" placeholder="ä¾‹å¦‚ï¼šXXXX-XXXX-XXXX" /><button type="button" class="eyeBtn" data-eye-target="licenseCode" title="æ˜¾ç¤º/éšè—">ğŸ‘</button></div>
        </div>
        <div class="row">
          <label for="authApiBase">æˆæƒ API åœ°å€</label>
          <input id="authApiBase" placeholder="ä¾‹å¦‚ï¼šhttps://license.your-domain.com" />
        </div>
        <div class="row">
          <label for="authPublicKeyJwk">æˆæƒå…¬é’¥ JWKï¼ˆEd25519ï¼‰</label>
          <textarea id="authPublicKeyJwk" placeholder='{"kty":"OKP","crv":"Ed25519","x":"..."}'></textarea>
        </div>
        <label class="checkInline"><input id="authAllowUnsignedCert" type="checkbox" />å¼€å‘æ¨¡å¼ï¼šå…è®¸æœªç­¾åè¯ä¹¦ï¼ˆä»…æœ¬åœ°è”è°ƒï¼‰</label>
        <div class="authActions">
          <button id="activateLicense" class="btn secondary mini">æ¿€æ´»æˆæƒ</button>
          <button id="deactivateLicense" class="btn secondary mini">è§£ç»‘æœ¬æœº</button>
          <button id="refreshAuth" class="btn secondary mini">åˆ·æ–°çŠ¶æ€</button>
          <button id="validatePublicKey" class="btn secondary mini">æ ¡éªŒå…¬é’¥</button>
          <button id="clearAuthLocal" class="btn secondary mini">æ¸…é™¤æœ¬åœ°æˆæƒ</button>
        </div>
        <div id="authState" class="authState">æˆæƒçŠ¶æ€ï¼šæœªæ£€æŸ¥</div>
        <div class="note">å…è´¹ç‰ˆé™åˆ¶ï¼šå•è¯æœ€å¤š 200ã€æ‰¹æ³¨æœ€å¤š 10ï¼›ä¸“ä¸šç‰ˆè§£é”å¯¼å…¥å¯¼å‡ºã€æ‰¹é‡æ“ä½œã€é«˜çº§å¤ä¹ ä¸é«˜çº§å¯¼å›¾æ¨¡æ¿ã€‚</div>
      </div>

      <div class="card">
        <h2>Azure Translatorï¼ˆä¼˜å…ˆï¼‰ <button class="btn secondary mini testBtn" data-state="idle" data-test-provider="azure">ğŸ§ª æµ‹è¯•</button></h2>
        <div class="row">
          <label for="azureKey">Key</label>
          <div class="inputWrap"><input id="azureKey" placeholder="Azure Translator Keyï¼ˆå¯ç•™ç©ºï¼‰" /><button type="button" class="eyeBtn" data-eye-target="azureKey" title="æ˜¾ç¤º/éšè—">ğŸ‘</button></div>
        </div>
        <div class="row">
          <label for="azureRegion">Region</label>
          <input id="azureRegion" placeholder="ä¾‹å¦‚ï¼šeastasiaï¼ˆå¯ç•™ç©ºï¼‰" />
        </div>
      </div>

      <div class="card">
        <h2>è…¾è®¯ç¿»è¯‘ï¼ˆå¯é€‰ï¼‰ <button class="btn secondary mini testBtn" data-state="idle" data-test-provider="tencent">ğŸ§ª æµ‹è¯•</button></h2>
        <div class="row">
          <label for="tencentId">SecretId</label>
          <div class="inputWrap"><input id="tencentId" placeholder="å¯ç•™ç©º" /><button type="button" class="eyeBtn" data-eye-target="tencentId" title="æ˜¾ç¤º/éšè—">ğŸ‘</button></div>
        </div>
        <div class="row">
          <label for="tencentKey">SecretKey</label>
          <div class="inputWrap"><input id="tencentKey" placeholder="å¯ç•™ç©º" /><button type="button" class="eyeBtn" data-eye-target="tencentKey" title="æ˜¾ç¤º/éšè—">ğŸ‘</button></div>
        </div>
      </div>

      <div class="card">
        <h2>é˜¿é‡Œäº‘ç¿»è¯‘ï¼ˆå¯é€‰ï¼‰ <button class="btn secondary mini testBtn" data-state="idle" data-test-provider="aliyun">ğŸ§ª æµ‹è¯•</button></h2>
        <div class="row">
          <label for="aliyunId">AccessKeyId</label>
          <div class="inputWrap"><input id="aliyunId" placeholder="å¯ç•™ç©º" /><button type="button" class="eyeBtn" data-eye-target="aliyunId" title="æ˜¾ç¤º/éšè—">ğŸ‘</button></div>
        </div>
        <div class="row">
          <label for="aliyunKey">AccessKeySecret</label>
          <div class="inputWrap"><input id="aliyunKey" placeholder="å¯ç•™ç©º" /><button type="button" class="eyeBtn" data-eye-target="aliyunKey" title="æ˜¾ç¤º/éšè—">ğŸ‘</button></div>
        </div>
      </div>

      <div class="card">
        <h2>å½©äº‘å°è¯‘ï¼ˆå¯é€‰ï¼‰ <button class="btn secondary mini testBtn" data-state="idle" data-test-provider="caiyun">ğŸ§ª æµ‹è¯•</button></h2>
        <div class="row">
          <label for="caiyunToken">Token</label>
          <div class="inputWrap"><input id="caiyunToken" placeholder="å¯ç•™ç©º" /><button type="button" class="eyeBtn" data-eye-target="caiyunToken" title="æ˜¾ç¤º/éšè—">ğŸ‘</button></div>
        </div>
      </div>

      <div class="card">
        <h2>æœ‰é“ï¼ˆå¯é€‰ï¼‰ <button class="btn secondary mini testBtn" data-state="idle" data-test-provider="youdao">ğŸ§ª æµ‹è¯•</button></h2>
        <div class="row">
          <label for="youdaoAppKey">AppKey</label>
          <div class="inputWrap"><input id="youdaoAppKey" placeholder="å¯ç•™ç©º" /><button type="button" class="eyeBtn" data-eye-target="youdaoAppKey" title="æ˜¾ç¤º/éšè—">ğŸ‘</button></div>
        </div>
        <div class="row">
          <label for="youdaoAppSecret">AppSecret</label>
          <div class="inputWrap"><input id="youdaoAppSecret" placeholder="å¯ç•™ç©º" /><button type="button" class="eyeBtn" data-eye-target="youdaoAppSecret" title="æ˜¾ç¤º/éšè—">ğŸ‘</button></div>
        </div>
      </div>
    </div>

    <div class="actions">
      <button id="save" class="btn">ğŸ’¾ ä¿å­˜</button>
      <button id="openManager" class="btn secondary">ğŸ“š ç®¡ç†å•è¯æœ¬</button>
      <button id="openReview" class="btn secondary">ğŸ§  è‰¾å®¾æµ©æ–¯æµ‹è¯•</button>
      <span id="status" class="status"></span>
    </div>

    <div class="note" style="margin-top:10px">
      å½“å‰ç‰ˆæœ¬åªåšâ€œé…ç½®æ”¶å£ + é™çº§ç­–ç•¥â€ã€‚åç»­ä½ æ¥å…¥å…·ä½“ä¾›åº”å•†æ¥å£æ—¶ï¼Œå»ºè®®æŒ‰ä¼˜å…ˆçº§ï¼šAzure â†’ è…¾è®¯ â†’ é˜¿é‡Œ â†’ å½©äº‘ â†’ å…è´¹ fallbackã€‚
    </div>
  </div>
  <script src="options.js"></script>
</body>
</html>
